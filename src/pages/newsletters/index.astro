---
import { getCollection } from "astro:content";
const items = await getCollection("newsletters", (n) => n.data.published !== false);
const sorted = items.sort(
  (a, b) => new Date(b.data.date ?? 0).getTime() - new Date(a.data.date ?? 0).getTime()
);
---

<html lang="en">
  <head><title>Newsletter</title></head>
  <body class="prose mx-auto p-6">
    <h1>Newsletter</h1>
    <ul>
      {sorted.map((item) => (
        <li>
          <a href={`/newsletters/${item.slug}/`}>
            {item.data.title ?? item.slug}
          </a>
          {item.data.date && <span class="block text-sm text-gray-500">{item.data.date}</span>}
        </li>
      ))}
    </ul>
  </body>
</html>
